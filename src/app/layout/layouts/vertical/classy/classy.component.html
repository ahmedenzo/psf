<fuse-loading-bar></fuse-loading-bar>

<!-- Navigation -->
<fuse-vertical-navigation
    class="dark bg-gradient-to-b from-gray-800 via-gray-700 to-gray-900 text-white print:hidden"
    [mode]="isScreenSmall ? 'over' : 'side'"
    [name]="'mainNavigation'"
    [navigation]="navigation.default"
    [opened]="!isScreenSmall">

    <!-- Navigation header hook -->
    <ng-container fuseVerticalNavigationContentHeader>
        <div class="flex items-center justify-between w-full p-4 border-b border-gray-600">
            <img class="w-20" src="assets/images/logo/tm.png" alt="Logo" />
            <user [showAvatar]="false"></user>
        </div>

        <!-- User Info -->
        <div class="flex flex-col items-center w-full px-4 py-6 space-y-4 text-center">
            <div class="relative w-20 h-20 rounded-full overflow-hidden border-4 border-white shadow-md">
                <img
                    class="w-full h-full object-cover"
                    [src]="role.includes('ROLE_SUPER_ADMIN') 
                        ? 'assets/images/logo/logomonetique.jpg' 
                        : (bankLogo ? 'data:image/png;base64,' + bankLogo : 'assets/images/logo/default-avatar.png')"
                    alt="User Avatar" />
            </div>

            <!-- Role Labels -->
            <div class="space-y-1">
                <div *ngIf="role.includes('ROLE_SUPER_ADMIN')" class="text-blue-400 font-extrabold tracking-wide uppercase text-sm flex items-center gap-2">
                    <i class="fas fa-crown"></i> SuperAdmin<br><span class="text-white font-semibold text-md">Monetique_Tunisie</span>
                </div>

    <div *ngIf="role.includes('ROLE_ADMIN')" class="flex flex-col items-center text-center space-y-1">
    <div class="flex items-center gap-2 text-white text-lg font-semibold">
        <i class="fas fa-user-shield"></i>
        <span>Administrator</span>
    </div>
    <span class="text-blue-400 text-base font-semibold">{{ bankName }}</span>
</div>


              <div *ngIf="role.includes('ROLE_USER')" class="text-white text-[13px] space-y-2 text-center">
    <!-- Role -->
    <div class="flex items-center justify-center gap-2 font-semibold text-white-400 text-sm">
        <i class="fas fa-user text-white-400"></i> Agent
    </div>

    <!-- Bank Name -->
    <div class="flex items-center justify-center gap-2 text-gray-200">
        <i class="fas fa-building text-blue-400"></i>
        <span class="font-medium">{{ bankName }}</span>
    </div>

    <!-- Agency Name -->
    <div class="flex items-center justify-center gap-2 text-gray-200">
        <i class="fas fa-map-marker-alt text-red-400"></i>
        <span class="font-medium">{{ agencyName }}</span>
    </div>

    <!-- Agency Code -->
    <div class="flex items-center justify-center gap-2 text-gray-200">
        <i class="fas fa-barcode text-yellow-300"></i>
        <span class="font-medium">{{ agencyCode }}</span>
    </div>
</div>

            </div>
        </div>
    </ng-container>

</fuse-vertical-navigation>

<!-- Wrapper -->
<div class="flex flex-col flex-auto w-full min-w-0">
    <!-- Header -->
    <div class="relative flex items-center justify-between w-full h-20 px-4 md:px-6 z-49 shadow dark:shadow-none dark:border-b bg-card dark:bg-transparent print:hidden">
        <div class="flex items-center space-x-4">
            <div class="w-10 h-10">
                <svg class="w-full h-full" viewBox="0 0 100 40" xmlns="http://www.w3.org/2000/svg">
                    <rect x="0" y="8" width="40" height="24" rx="3" fill="#3B82F6"/>
                    <rect x="5" y="15" width="12" height="2.5" fill="white"/>
                    <rect x="5" y="20" width="8" height="2.5" fill="white"/>
                    <text x="10" y="30" fill="white" font-size="5" font-family="Arial">PIN</text>
                    <circle r="2.5" fill="#10B981">
                        <animate attributeName="cx" values="20;70" dur="1.5s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="20;20" dur="1.5s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="1;0.5;1" dur="1.5s" repeatCount="indefinite"/>
                    </circle>
                    <rect x="72" y="6" width="20" height="28" rx="2" fill="#1F2937"/>
                    <rect x="76" y="10" width="12" height="18" fill="white"/>
                    <circle cx="82" cy="31" r="1.5" fill="#9CA3AF"/>
                </svg>
            </div>

            <div class="flex flex-col">
                <span class="text-lg font-bold text-gray-800 dark:text-white">Monetique Tunisie</span>
                <span class="text-sm text-gray-500 dark:text-gray-400">PinSender - Secure PIN Delivery</span>
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="flex flex-col flex-auto">
        <router-outlet *ngIf="true"></router-outlet>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<style>
    fuse-vertical-navigation .fuse-vertical-navigation-item {
        border-left: 4px solid transparent;
        transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    fuse-vertical-navigation .fuse-vertical-navigation-item.active {
        background-color: rgba(255, 255, 255, 0.05);
        border-left-color: #3B82F6;
    }

    fuse-vertical-navigation .fuse-vertical-navigation-item:hover {
        background-color: rgba(255, 255, 255, 0.03);
    }
</style>
